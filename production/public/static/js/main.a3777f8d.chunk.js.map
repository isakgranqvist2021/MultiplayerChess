{"version":3,"sources":["Styles/game.module.css","reportWebVitals.ts","Pages/HomeComponent.tsx","Game/game.tsx","Game/settings.tsx","Game/square.tsx","Game/board.tsx","Game/init.tsx","Components/GameComponent.tsx","Game/utils.tsx","Game/math.tsx","Components/SidebarComponent.tsx","Components/GameHeaderComponent.tsx","Utils/helpers.tsx","Game/sounds.tsx","Pages/PlayComponent.tsx","Pages/NotFoundComponent.tsx","Components/LoadingComponent.tsx","Components/RouterComponent.tsx","Components/OutletComponent.tsx","index.tsx"],"names":["module","exports","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","HomeComponent","loginWithRedirect","useAuth0","onClick","redirectUri","process","playerRole","settings","totalSquares","totalRows","totalCols","w","h","pw","ph","indexOffset","colors","selectedPiece","availableMoves","images","active","b","Image","k","n","p","q","r","setAvailableMoves","newState","setSelectedPiece","piece","squareDimentions","x","col","y","row","getLetter","Error","init","game","Game","pieces","squares","i","Math","floor","symbol","color","reverse","square","push","createBoard","img","src","loadImages","board","configuration","newGame","gbc","resetGame","GameComponent","props","canvasRef","useRef","ctx","main","moves","length","d","fillStyle","includes","turn","fillRect","toLowerCase","drawImage","requestAnimationFrame","syncRoom","evType","from","to","send","JSON","stringify","type","payload","uid","user","sub","rid","roomId","useEffect","current","getContext","width","height","className","classes","e","letter","nativeEvent","offsetX","getRow","offsetY","getCol","move","toUpperCase","ref","canvas","SidebarContainer","styled","div","Button","open","css","Sidebar","Backdrop","SidebarContent","SidebarComponent","isLoading","logout","useState","setOpen","picture","alt","name","email","activeGame","leaveGame","startGame","Header","header","Avatar","Participants","GameHeaderComponent","setRid","value","placeholder","onChange","target","disabled","joinGame","connections","map","c","id","role","userId","addr","sounds","game_over","Audio","game_start","player_join","player_leave","player_move","playSound","key","play","Main","PlayComponent","socket","WebSocket","setActiveGame","setRoomId","setConnections","OPEN","window","alert","updatePlayerRole","find","onopen","console","log","onclose","onmessage","data","parse","history","hb","updateGame","nickname","runes","split","random","randId","NotFoundComponent","LoadingComponent","requireLogin","next","loggedIn","meta","undefined","auth","redirect","RouterComponent","isAuthenticated","guards","loading","error","path","exact","component","OutletComponent","domain","clientId","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a3777f8d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"game\":\"game_game__2xh_k\",\"canvas\":\"game_canvas__EaLGy\"};","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","/** @format */\r\n\r\nimport { useAuth0 } from '@auth0/auth0-react';\r\n\r\nexport default function HomeComponent(): JSX.Element {\r\n\tconst { loginWithRedirect } = useAuth0();\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<button\r\n\t\t\t\tonClick={() =>\r\n\t\t\t\t\tloginWithRedirect({\r\n\t\t\t\t\t\tredirectUri: process.env.REACT_APP_CLIENT_ADDR,\r\n\t\t\t\t\t})\r\n\t\t\t\t}>\r\n\t\t\t\tLog In\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t);\r\n}\r\n","/** @format */\r\n\r\nimport { init } from './init';\r\n\r\nlet newGame = init();\r\nexport let game: any = newGame.game;\r\nexport let pieces: Piece[] = newGame.pieces;\r\nexport let gbc = game.board.configuration;\r\nexport let playerRole: string | undefined;\r\n\r\nexport const setPlayerRole = (role: string) => (playerRole = role);\r\n\r\nexport const resetGame = (): void => {\r\n\tnewGame = init();\r\n\tgame = newGame.game;\r\n\tpieces = newGame.pieces;\r\n\tgbc = newGame.game.board.configuration;\r\n};\r\n","/** @format */\r\n\r\ninterface ISettings {\r\n\ttotalSquares: number;\r\n\ttotalRows: number;\r\n\ttotalCols: number;\r\n\tw: number;\r\n\th: number;\r\n\tpw: number;\r\n\tph: number;\r\n\tindexOffset: number;\r\n}\r\n\r\nexport let settings: ISettings = {\r\n\ttotalSquares: 64,\r\n\ttotalRows: 8,\r\n\ttotalCols: 8,\r\n\tw: 800,\r\n\th: 800,\r\n\tpw: 30,\r\n\tph: 30,\r\n\tindexOffset: 1,\r\n};\r\n\r\nexport const colors = ['#ffffff', '#7621a3'];\r\nexport let selectedPiece: any = null;\r\nexport let availableMoves: any[] = [];\r\nexport const aw = '#32a852';\r\nexport const ab = '#324ea8';\r\nexport let images: any = {};\r\nexport let active: any = {\r\n\tb: new Image(),\r\n\tk: new Image(),\r\n\tn: new Image(),\r\n\tp: new Image(),\r\n\tq: new Image(),\r\n\tr: new Image(),\r\n};\r\n\r\nexport const setAvailableMoves = (newState: string[]) =>\r\n\t(availableMoves = newState);\r\n\r\nexport const setSelectedPiece = (piece: Piece | null) =>\r\n\t(selectedPiece = piece);\r\n\r\nexport const setSettings = (newSettings: ISettings) => (settings = newSettings);\r\n","/** @format */\r\n\r\nimport { settings } from './settings';\r\n\r\nexport const squareDimentions = (\r\n\tpiece: Piece\r\n): { x: number; y: number; w: number; h: number } => {\r\n\tlet x =\r\n\t\t((piece.col - settings.indexOffset) * settings.w) / settings.totalCols;\r\n\r\n\tlet y =\r\n\t\t((piece.row - settings.indexOffset) * settings.h) / settings.totalRows;\r\n\r\n\tlet w = settings.w / settings.totalRows;\r\n\tlet h = settings.h / settings.totalCols;\r\n\r\n\treturn {\r\n\t\tx: x,\r\n\t\ty: y,\r\n\t\tw: w,\r\n\t\th: h,\r\n\t};\r\n};\r\n","/** @format */\r\n\r\nimport { settings } from './settings';\r\n\r\nconst getLetter = (col: number) => {\r\n\tswitch (col) {\r\n\t\tcase 1:\r\n\t\t\treturn 'A';\r\n\t\tcase 2:\r\n\t\t\treturn 'B';\r\n\t\tcase 3:\r\n\t\t\treturn 'C';\r\n\t\tcase 4:\r\n\t\t\treturn 'D';\r\n\t\tcase 5:\r\n\t\t\treturn 'E';\r\n\t\tcase 6:\r\n\t\t\treturn 'F';\r\n\t\tcase 7:\r\n\t\t\treturn 'G';\r\n\t\tcase 8:\r\n\t\t\treturn 'H';\r\n\r\n\t\tdefault:\r\n\t\t\tthrow Error('invalid');\r\n\t}\r\n};\r\n\r\nexport const createBoard = (): Piece[] => {\r\n\tconst squares: Piece[] = [];\r\n\tconst colors = ['white', 'black'];\r\n\r\n\tfor (let i = 0; i < settings.totalSquares; i++) {\r\n\t\tlet col = Math.floor(i % settings.totalCols);\r\n\t\tlet row = Math.floor(i / settings.totalRows) + settings.indexOffset;\r\n\t\tlet symbol = getLetter(col + settings.indexOffset) + row;\r\n\r\n\t\tlet color = colors[0];\r\n\t\tif (i % 8 === 0) colors.reverse();\r\n\t\tif (i % 2 === 0) color = colors[1];\r\n\r\n\t\tlet square = {\r\n\t\t\tsquare: i + settings.indexOffset,\r\n\t\t\tcol: col + settings.indexOffset,\r\n\t\t\trow: row,\r\n\t\t\tsymbol: symbol,\r\n\t\t\tcolor: color,\r\n\t\t};\r\n\r\n\t\tsquares.push(square);\r\n\t}\r\n\r\n\treturn squares;\r\n};\r\n","/** @format */\r\n\r\nimport { images, active } from './settings';\r\nimport { Game } from 'js-chess-engine';\r\nimport { createBoard } from 'Game/board';\r\n\r\nconst loadImages = (pieces: any) => {\r\n\tfor (let k in pieces) {\r\n\t\tlet piece = pieces[k];\r\n\t\tlet img = new Image();\r\n\t\timg.src = `/public/pieces/${piece}.svg`;\r\n\t\timages[piece] = img;\r\n\t}\r\n\r\n\tfor (let k in active) {\r\n\t\tactive[k].src = `/public/pieces/green/${k}.svg`;\r\n\t}\r\n};\r\n\r\nexport const init = () => {\r\n\tlet game = new Game();\r\n\tlet pieces = createBoard();\r\n\r\n\tloadImages(game.board.configuration.pieces);\r\n\r\n\treturn {\r\n\t\tgame,\r\n\t\tpieces,\r\n\t};\r\n};\r\n","/** @format */\r\n\r\nimport classes from 'Styles/game.module.css';\r\n\r\nimport { useRef, useEffect, MutableRefObject } from 'react';\r\nimport {\r\n\tsettings,\r\n\tcolors,\r\n\tselectedPiece,\r\n\tavailableMoves,\r\n\taw,\r\n\tab,\r\n\tsetAvailableMoves,\r\n\timages,\r\n\tactive,\r\n\tsetSelectedPiece,\r\n} from 'Game/settings';\r\nimport { pieceColor } from 'Game/utils';\r\nimport { squareDimentions } from 'Game/square';\r\nimport { getCol, getRow } from 'Game/math';\r\nimport { game, pieces, gbc, playerRole } from 'Game/game';\r\n\r\n/*\r\n        ♖♘♗♕♔♗♘♖ \r\n        ♙♙♙♙♙♙♙♙\r\n            \r\n              VS\r\n\r\n        ♟♟♟♟♟♟♟♟\r\n        ♜♞♝♛♚♝♞♜\r\n*/\r\n\r\nexport default function GameComponent(props: {\r\n\tactiveGame: boolean;\r\n\tsend: any;\r\n\tuser: any;\r\n\troomId: string;\r\n}): JSX.Element {\r\n\tconst canvasRef: any = useRef<MutableRefObject<HTMLCanvasElement | null>>();\r\n\tlet ctx: CanvasRenderingContext2D | null = null;\r\n\r\n\tconst main = () => {\r\n\t\tif (ctx !== null) {\r\n\t\t\tif (selectedPiece) {\r\n\t\t\t\tsetAvailableMoves(game.moves(selectedPiece.symbol));\r\n\t\t\t}\r\n\r\n\t\t\tfor (let i = 0; i < pieces.length; i++) {\r\n\t\t\t\tlet d = squareDimentions(pieces[i]);\r\n\t\t\t\tctx.fillStyle = colors[pieces[i].color === 'white' ? 0 : 1];\r\n\r\n\t\t\t\tif (availableMoves.includes(pieces[i].symbol)) {\r\n\t\t\t\t\tctx.fillStyle = gbc.turn === 'white' ? aw : ab;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tctx.fillRect(d.x, d.y, d.w, d.h);\r\n\r\n\t\t\t\tlet piece = gbc.pieces[pieces[i].symbol];\r\n\t\t\t\tif (piece) {\r\n\t\t\t\t\tlet img = images[piece];\r\n\r\n\t\t\t\t\tif (selectedPiece && i + 1 === selectedPiece.square) {\r\n\t\t\t\t\t\timg = active[piece.toLowerCase()];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tctx.drawImage(img, d.x + settings.pw, d.y + settings.ph);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn requestAnimationFrame(main);\r\n\t};\r\n\r\n\tconst eventHandler = (e: any) => {\r\n\t\tif (playerRole !== gbc.turn) return;\r\n\r\n\t\tconst x = e.nativeEvent.offsetX;\r\n\t\tconst y = e.nativeEvent.offsetY;\r\n\r\n\t\tlet row = getRow(y);\r\n\t\tlet col = getCol(x);\r\n\r\n\t\tfor (let i = 0; i < pieces.length; i++) {\r\n\t\t\tif (pieces[i].col === col && pieces[i].row === row) {\r\n\t\t\t\tlet p = gbc.pieces[pieces[i].symbol];\r\n\r\n\t\t\t\tlet canMove =\r\n\t\t\t\t\tselectedPiece && availableMoves.includes(pieces[i].symbol);\r\n\r\n\t\t\t\tif (canMove) {\r\n\t\t\t\t\tgame.move(selectedPiece.symbol, pieces[i].symbol);\r\n\t\t\t\t\tsyncRoom(\r\n\t\t\t\t\t\t'player move',\r\n\t\t\t\t\t\tselectedPiece.symbol,\r\n\t\t\t\t\t\tpieces[i].symbol\r\n\t\t\t\t\t);\r\n\t\t\t\t\tsetSelectedPiece(null);\r\n\t\t\t\t\treturn setAvailableMoves([]);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (pieceColor(p) === gbc.turn) {\r\n\t\t\t\t\treturn setSelectedPiece(pieces[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tconst syncRoom = (evType: string, from: string, to: string) => {\r\n\t\tprops.send(\r\n\t\t\tJSON.stringify({\r\n\t\t\t\ttype: evType,\r\n\t\t\t\tpayload: { from, to },\r\n\t\t\t\tuid: props.user?.sub,\r\n\t\t\t\trid: props.roomId,\r\n\t\t\t})\r\n\t\t);\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (canvasRef && canvasRef.current) {\r\n\t\t\tctx = canvasRef.current.getContext('2d');\r\n\t\t\tcanvasRef.current.width = settings.w;\r\n\t\t\tcanvasRef.current.height = settings.h;\r\n\t\t\tmain();\r\n\t\t}\r\n\t}, [canvasRef.current]);\r\n\r\n\treturn (\r\n\t\t<div className={classes.game}>\r\n\t\t\t<canvas\r\n\t\t\t\tonClick={eventHandler}\r\n\t\t\t\tref={canvasRef}\r\n\t\t\t\tclassName={classes.canvas}></canvas>\r\n\t\t</div>\r\n\t);\r\n}\r\n","/** @format */\r\n\r\nexport const pieceColor = (letter: string): string => {\r\n\tif (letter === letter.toUpperCase()) return 'white';\r\n\treturn 'black';\r\n};\r\n","/** @format */\r\n\r\nimport { settings } from './settings';\r\n\r\nexport const getRow = (y: number) => {\r\n\treturn (\r\n\t\tMath.floor(y / (settings.h / settings.totalRows)) + settings.indexOffset\r\n\t);\r\n};\r\n\r\nexport const getCol = (x: number) => {\r\n\treturn (\r\n\t\tMath.floor(x / (settings.w / settings.totalCols)) + settings.indexOffset\r\n\t);\r\n};\r\n","/** @format */\r\n\r\nimport { useState } from 'react';\r\nimport { useAuth0 } from '@auth0/auth0-react';\r\nimport styled, { css } from 'styled-components';\r\n\r\nconst SidebarContainer = styled.div``;\r\n\r\nconst Button = styled('div')<{ open: boolean }>`\r\n\tdisplay: none;\r\n\ttransition: all 300ms ease;\r\n\tz-index: 5;\r\n\twidth: 60px;\r\n\theight: 60px;\r\n\tbackground-color: #fff;\r\n\tpadding: 0.5rem;\r\n\tborder-radius: 50%;\r\n\r\n\tspan {\r\n\t\tdisplay: block;\r\n\t\twidth: 75%;\r\n\t\theight: 2px;\r\n\t\tbackground-color: #333;\r\n\t}\r\n\r\n\t@media (max-width: 1150px) {\r\n\t\tposition: fixed;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tgap: 8px;\r\n\t\tleft: 0;\r\n\t\tmargin: 10px 0 0 10px;\r\n\t\tbox-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);\r\n\t\tcursor: pointer;\r\n\r\n\t\t&:hover {\r\n\t\t\ttransform: scale(0.9);\r\n\t\t}\r\n\r\n\t\t${(props) =>\r\n\t\t\tprops.open &&\r\n\t\t\tcss`\r\n\t\t\t\tleft: 250px;\r\n\t\t\t`}\r\n\t}\r\n`;\r\n\r\nconst Sidebar = styled('aside')<{ open: boolean }>`\r\n\theight: 100vh;\r\n\tbackground-color: #7621a3;\r\n\twidth: 250px;\r\n\tborder-right: 1px solid #fff;\r\n\ttransition: all 300ms ease;\r\n\r\n\t@media (max-width: 1150px) {\r\n\t\tposition: fixed;\r\n\t\twidth: 0;\r\n\t\toverflow: hidden;\r\n\t\tborder-right: none;\r\n\t\tz-index: 5;\r\n\r\n\t\t${(props) =>\r\n\t\t\tprops.open &&\r\n\t\t\tcss`\r\n\t\t\t\twidth: 250px;\r\n\t\t\t`}\r\n\t}\r\n`;\r\n\r\nconst Backdrop = styled('div')<{ open: boolean }>`\r\n\tposition: fixed;\r\n\tinset: 0;\r\n\tz-index: 4;\r\n\tbackground-color: rgba(0, 0, 0, 0);\r\n\tpointer-events: none;\r\n\ttransition: all 300ms ease;\r\n\r\n\t${(props) =>\r\n\t\tprops.open &&\r\n\t\tcss`\r\n\t\t\tcursor: pointer;\r\n\t\t\tpointer-events: all;\r\n\t\t\tbackground-color: rgba(0, 0, 0, 0.5);\r\n\t\t`}\r\n`;\r\n\r\nconst SidebarContent = styled.div`\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tjustify-content: space-between;\r\n\theight: 100%;\r\n\tpadding: 50px 20px 20px 20px;\r\n\twidth: 250px;\r\n\r\n\th2,\r\n\tp {\r\n\t\tmargin: 10px 0;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\timg {\r\n\t\tborder-radius: 50%;\r\n\t\tborder: 2px solid #fff;\r\n\t}\r\n\r\n\tbutton {\r\n\t\twidth: 100%;\r\n\t\tpadding: 12px;\r\n\t}\r\n`;\r\n\r\nexport default function SidebarComponent(props: {\r\n\tstartGame: any;\r\n\tactiveGame: boolean;\r\n\tleaveGame: any;\r\n}): JSX.Element {\r\n\tconst { user, isLoading, logout } = useAuth0();\r\n\tconst [open, setOpen] = useState<boolean>(false);\r\n\r\n\tif (isLoading) {\r\n\t\treturn <Sidebar open={open}>Loading ...</Sidebar>;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<SidebarContainer>\r\n\t\t\t<Button open={open} onClick={() => setOpen(!open ? true : false)}>\r\n\t\t\t\t<span></span>\r\n\t\t\t\t<span></span>\r\n\t\t\t\t<span></span>\r\n\t\t\t</Button>\r\n\t\t\t<Backdrop open={open} onClick={() => setOpen(false)} />\r\n\t\t\t<Sidebar open={open}>\r\n\t\t\t\t<SidebarContent>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<img src={user?.picture} alt={user?.name} />\r\n\t\t\t\t\t\t<h2>{user?.name}</h2>\r\n\t\t\t\t\t\t<p>{user?.email}</p>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\tprops.activeGame\r\n\t\t\t\t\t\t\t\t\t? props.leaveGame()\r\n\t\t\t\t\t\t\t\t\t: props.startGame()\r\n\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t{!props.activeGame ? 'New Game' : 'Leave Game'}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<button onClick={() => logout()}>Logout</button>\r\n\t\t\t\t</SidebarContent>\r\n\t\t\t</Sidebar>\r\n\t\t</SidebarContainer>\r\n\t);\r\n}\r\n","/** @format */\r\n\r\nimport { useState } from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst Header = styled.header`\r\n\tposition: fixed;\r\n\tright: 0;\r\n\twidth: calc(100% - 250px);\r\n\tbackground-color: #7621a3;\r\n\tpadding: 1rem 2rem;\r\n\r\n\t.headerContent {\r\n\t\tmargin: 0 auto;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\tp {\r\n\t\tmargin: 0;\r\n\t\tcolor: #fff;\r\n\r\n\t\t.key {\r\n\t\t\tcolor: #ffffff;\r\n\t\t\tfont-weight: 700;\r\n\t\t}\r\n\t}\r\n\r\n\tbutton {\r\n\t\tpadding: 12px;\r\n\t\twidth: 125px;\r\n\t\tmargin-left: 5px;\r\n\t}\r\n\r\n\t.joinGameForm {\r\n\t\tdisplay: flex;\r\n\t}\r\n\r\n\tinput {\r\n\t\twidth: 100%;\r\n\t\tpadding: 12px;\r\n\t}\r\n\r\n\t@media (max-width: 1150px) {\r\n\t\twidth: 100%;\r\n\t}\r\n`;\r\n\r\nconst Avatar = styled('div')<{ src: string }>`\r\n\twidth: 40px;\r\n\theight: 40px;\r\n\tborder-radius: 50%;\r\n\tmargin-bottom: 5px;\r\n\tposition: relative;\r\n\tbackground-image: url(${(props) => props.src});\r\n\tbackground-size: cover;\r\n\tbackground-position: center center;\r\n\tbackground-repeat: no-repeat;\r\n\r\n\t&::before {\r\n\t\tcontent: '';\r\n\t\tposition: absolute;\r\n\t\tinset: 0;\r\n\t\tbackground-color: #00000094;\r\n\t\tborder-radius: 50%;\r\n\t}\r\n`;\r\n\r\nconst Participants = styled.div`\r\n\tdisplay: flex;\r\n\tgap: 25px;\r\n\r\n\t.avatarContainer {\r\n\t\tposition: relative;\r\n\r\n\t\tspan {\r\n\t\t\tcolor: #fff;\r\n\t\t\tfont-weight: 700;\r\n\t\t\tposition: absolute;\r\n\t\t\tleft: 50%;\r\n\t\t\ttop: 50%;\r\n\t\t\ttransform: translate(-50%, -60%);\r\n\t\t\ttext-transform: uppercase;\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport default function GameHeaderComponent(props: {\r\n\tconnections: any[];\r\n\troomId: string;\r\n\tjoinGame: any;\r\n}): JSX.Element {\r\n\tconst [rid, setRid] = useState<string>('');\r\n\treturn (\r\n\t\t<Header>\r\n\t\t\t<div className='headerContent'>\r\n\t\t\t\t{props.roomId.length > 0 && (\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t<span className='key'>Room ID:</span> {props.roomId}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t)}\r\n\t\t\t\t{props.roomId.length <= 0 && (\r\n\t\t\t\t\t<div className='joinGameForm'>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tvalue={rid}\r\n\t\t\t\t\t\t\tplaceholder='cf1hc2jnbf93e6vo8_y6e_255'\r\n\t\t\t\t\t\t\tonChange={(e: any) => setRid(e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tdisabled={rid.length <= 0}\r\n\t\t\t\t\t\t\tonClick={() => props.joinGame(rid)}\r\n\t\t\t\t\t\t\tclassName='joinGameBtn'>\r\n\t\t\t\t\t\t\tJoin Game\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t\t<Participants>\r\n\t\t\t\t\t{props.connections.map((c: any) => (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName='avatarContainer'\r\n\t\t\t\t\t\t\tkey={c.userId}\r\n\t\t\t\t\t\t\tid={`player-${c.role}`}>\r\n\t\t\t\t\t\t\t<Avatar src={c.picture} />\r\n\t\t\t\t\t\t\t<span>{c.role[0]}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</Participants>\r\n\t\t\t</div>\r\n\t\t</Header>\r\n\t);\r\n}\r\n","/** @format */\r\n\r\nexport const randId = (n: number = 10) => {\r\n\tlet runes = 'qwertyuiopasdfghjklzxcvbnm1234567890_'.split('');\r\n\tlet id: string = '';\r\n\r\n\tfor (let i = 0; i < n; i++)\r\n\t\tid += runes[Math.floor(Math.random() * runes.length)];\r\n\r\n\treturn id;\r\n};\r\n","/** @format */\r\n\r\nconst addr = process.env.REACT_APP_SERVER_ADDR + '/public/sounds';\r\n\r\ninterface IDictionary<TValue> {\r\n\t[key: string]: TValue;\r\n}\r\n\r\nconst sounds: IDictionary<HTMLAudioElement> = {\r\n\tgame_over: new Audio(addr + '/game_over.wav'),\r\n\tgame_start: new Audio(addr + '/game_start.wav'),\r\n\tplayer_join: new Audio(addr + '/player_join.wav'),\r\n\tplayer_leave: new Audio(addr + '/player_leave.wav'),\r\n\tplayer_move: new Audio(addr + '/player_move.wav'),\r\n};\r\n\r\nexport const playSound = (key: string) => {\r\n\tlet sound: any = sounds[key];\r\n\tsound.play();\r\n};\r\n","/** @format */\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useAuth0 } from '@auth0/auth0-react';\r\nimport GameComponent from 'Components/GameComponent';\r\nimport SidebarComponent from 'Components/SidebarComponent';\r\nimport GameHeaderComponent from 'Components/GameHeaderComponent';\r\nimport styled from 'styled-components';\r\nimport { randId } from 'Utils/helpers';\r\nimport { game, resetGame, setPlayerRole } from 'Game/game';\r\nimport { playSound } from 'Game/sounds';\r\n\r\nconst Main = styled.div`\r\n\tdisplay: flex;\r\n`;\r\n\r\nexport default function PlayComponent(): JSX.Element {\r\n\tconst socket: WebSocket = new WebSocket(\r\n\t\tprocess.env.REACT_APP_WS_ADDR ||\r\n\t\t\t'wss://chessapplicationcasews.herokuapp.com'\r\n\t);\r\n\tconst { user, isLoading } = useAuth0();\r\n\tconst [activeGame, setActiveGame] = useState<boolean>(false);\r\n\tconst [roomId, setRoomId] = useState<string>('');\r\n\tconst [connections, setConnections] = useState<any[]>([]);\r\n\r\n\tconst startGame = () => {\r\n\t\tif (roomId.length > 0)\r\n\t\t\tsend(\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\ttype: 'leave room',\r\n\t\t\t\t\tuid: user?.sub,\r\n\t\t\t\t\trid: roomId,\r\n\t\t\t\t})\r\n\t\t\t);\r\n\r\n\t\tsetConnections([]);\r\n\t\tresetGame();\r\n\r\n\t\tconst id = randId(25);\r\n\t\tsetRoomId(id);\r\n\r\n\t\tsend(\r\n\t\t\tJSON.stringify({\r\n\t\t\t\ttype: 'open room',\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tpicture: user?.picture,\r\n\t\t\t\t\tnickname: user?.nickname,\r\n\t\t\t\t},\r\n\t\t\t\tuid: user?.sub,\r\n\t\t\t\trid: id,\r\n\t\t\t})\r\n\t\t);\r\n\r\n\t\tplaySound('game_start');\r\n\t\treturn setActiveGame(true);\r\n\t};\r\n\r\n\tconst leaveGame = () => {\r\n\t\tplaySound('player_leave');\r\n\r\n\t\tsend(\r\n\t\t\tJSON.stringify({\r\n\t\t\t\ttype: 'leave room',\r\n\t\t\t\tuid: user?.sub,\r\n\t\t\t\trid: roomId,\r\n\t\t\t})\r\n\t\t);\r\n\r\n\t\tsetActiveGame(false);\r\n\t\tsetRoomId('');\r\n\t\tsetConnections([]);\r\n\t};\r\n\r\n\tconst joinGame = (rid: string) => {\r\n\t\tsend(\r\n\t\t\tJSON.stringify({\r\n\t\t\t\ttype: 'reset user',\r\n\t\t\t\tuid: user?.sub,\r\n\t\t\t})\r\n\t\t);\r\n\r\n\t\tsetConnections([]);\r\n\t\tresetGame();\r\n\t\tsetRoomId(rid);\r\n\r\n\t\tsend(\r\n\t\t\tJSON.stringify({\r\n\t\t\t\ttype: 'join room',\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tpicture: user?.picture,\r\n\t\t\t\t\tnickname: user?.nickname,\r\n\t\t\t\t},\r\n\t\t\t\tuid: user?.sub,\r\n\t\t\t\trid: rid,\r\n\t\t\t})\r\n\t\t);\r\n\r\n\t\treturn setActiveGame(true);\r\n\t};\r\n\r\n\tconst send = (payload: any) => {\r\n\t\tif (socket.OPEN === 1) {\r\n\t\t\treturn socket.send(payload);\r\n\t\t} else {\r\n\t\t\twindow.alert('connection lost.. please reload window');\r\n\t\t}\r\n\t};\r\n\r\n\tconst updatePlayerRole = (payload: any) => {\r\n\t\tif (payload.uid === user?.sub) {\r\n\t\t\treturn setPlayerRole(\r\n\t\t\t\tpayload.connections.find((c: any) => c.userId === user?.sub)\r\n\t\t\t\t\t.role\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn;\r\n\t};\r\n\r\n\tconst syncGame = (rid: string) => {\r\n\t\tsend(\r\n\t\t\tJSON.stringify({\r\n\t\t\t\ttype: 'sync room',\r\n\t\t\t\trid: rid,\r\n\t\t\t\tuid: user?.sub,\r\n\t\t\t\tpayload: game.board.history.map((hb: any) => ({\r\n\t\t\t\t\tfrom: hb.from,\r\n\t\t\t\t\tto: hb.to,\r\n\t\t\t\t})),\r\n\t\t\t})\r\n\t\t);\r\n\t};\r\n\r\n\tconst updateGame = (history: any) => {\r\n\t\tfor (let i = 0; i < history.length; i++)\r\n\t\t\tgame.move(history[i].from, history[i].to);\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tsocket.onopen = () => {\r\n\t\t\tconsole.log('ws connection open');\r\n\t\t\tsend(\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\ttype: 'reset user',\r\n\t\t\t\t\tuid: user?.sub,\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t};\r\n\r\n\t\tsocket.onclose = () => {\r\n\t\t\tconsole.log('ws connection closed');\r\n\t\t};\r\n\r\n\t\tsocket.onmessage = (data: any) => {\r\n\t\t\tlet payload = JSON.parse(data.data);\r\n\r\n\t\t\tswitch (payload.type) {\r\n\t\t\t\tcase 'open room':\r\n\t\t\t\t\tupdatePlayerRole(payload);\r\n\t\t\t\t\treturn setConnections(payload.connections);\r\n\t\t\t\tcase 'join room':\r\n\t\t\t\t\tupdatePlayerRole(payload);\r\n\t\t\t\t\tsyncGame(payload.id);\r\n\t\t\t\t\tplaySound('player_join');\r\n\t\t\t\t\treturn setConnections(payload.connections);\r\n\t\t\t\tcase 'player move':\r\n\t\t\t\t\tplaySound('player_move');\r\n\t\t\t\t\tif (payload.uid === user?.sub) return;\r\n\t\t\t\t\treturn game.move(payload.from, payload.to);\r\n\t\t\t\tcase 'sync room':\r\n\t\t\t\t\tif (payload.uid === user?.sub) return;\r\n\t\t\t\t\treturn updateGame(payload.history);\r\n\t\t\t\tcase 'leave room':\r\n\t\t\t\t\tplaySound('player_leave');\r\n\t\t\t\t\treturn setConnections([...payload.connections]);\r\n\t\t\t}\r\n\t\t};\r\n\t}, []);\r\n\r\n\tif (isLoading) {\r\n\t\treturn <div>Loading ...</div>;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Main>\r\n\t\t\t<GameHeaderComponent\r\n\t\t\t\tconnections={connections}\r\n\t\t\t\troomId={roomId}\r\n\t\t\t\tjoinGame={joinGame}\r\n\t\t\t/>\r\n\t\t\t<SidebarComponent\r\n\t\t\t\tstartGame={startGame}\r\n\t\t\t\tactiveGame={activeGame}\r\n\t\t\t\tleaveGame={leaveGame}\r\n\t\t\t/>\r\n\t\t\t<GameComponent\r\n\t\t\t\tactiveGame={activeGame}\r\n\t\t\t\tsend={send}\r\n\t\t\t\tuser={user}\r\n\t\t\t\troomId={roomId}\r\n\t\t\t/>\r\n\t\t</Main>\r\n\t);\r\n}\r\n","/** @format */\r\n\r\nexport default function NotFoundComponent(): JSX.Element {\r\n\treturn <div>Not Found</div>;\r\n}\r\n","/** @format */\r\n\r\nexport default function LoadingComponent(): JSX.Element {\r\n\treturn <div>Loading...</div>;\r\n}\r\n","/** @format */\r\n\r\nimport { BrowserRouter, Switch } from 'react-router-dom';\r\nimport { GuardProvider, GuardedRoute } from 'react-router-guards';\r\nimport { useAuth0 } from '@auth0/auth0-react';\r\n\r\nimport HomeComponent from 'Pages/HomeComponent';\r\nimport PlayComponent from 'Pages/PlayComponent';\r\nimport NotFoundComponent from 'Pages/NotFoundComponent';\r\nimport LoadingComponent from './LoadingComponent';\r\n\r\nconst requireLogin = (to: any, from: any, next: any) => {\r\n\tconst loggedIn = to.meta.loggedIn;\r\n\r\n\tif (to.meta.auth === undefined) return next();\r\n\tif (to.meta.auth && !loggedIn) return next.redirect('/');\r\n\tif (!to.meta.auth && loggedIn) return next.redirect('/play');\r\n\r\n\treturn next();\r\n};\r\n\r\nexport default function RouterComponent(): JSX.Element {\r\n\tconst { isAuthenticated, isLoading } = useAuth0();\r\n\r\n\tif (isLoading) return <LoadingComponent />;\r\n\r\n\treturn (\r\n\t\t<BrowserRouter>\r\n\t\t\t<GuardProvider\r\n\t\t\t\tguards={[requireLogin]}\r\n\t\t\t\tloading={LoadingComponent}\r\n\t\t\t\terror={NotFoundComponent}>\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t<GuardedRoute\r\n\t\t\t\t\t\tpath='/'\r\n\t\t\t\t\t\texact\r\n\t\t\t\t\t\tcomponent={HomeComponent}\r\n\t\t\t\t\t\tmeta={{ auth: false, loggedIn: isAuthenticated }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<GuardedRoute\r\n\t\t\t\t\t\tpath='/play'\r\n\t\t\t\t\t\texact\r\n\t\t\t\t\t\tcomponent={PlayComponent}\r\n\t\t\t\t\t\tmeta={{ auth: true, loggedIn: isAuthenticated }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<GuardedRoute path='*' component={NotFoundComponent} />\r\n\t\t\t\t</Switch>\r\n\t\t\t</GuardProvider>\r\n\t\t</BrowserRouter>\r\n\t);\r\n}\r\n","/** @format */\r\n\r\nimport { Auth0Provider } from '@auth0/auth0-react';\r\n\r\nimport RouterComponent from 'Components/RouterComponent';\r\n\r\nexport default function OutletComponent(): JSX.Element {\r\n\treturn (\r\n\t\t<Auth0Provider\r\n\t\t\tdomain='dustiastheguy.eu.auth0.com'\r\n\t\t\tclientId='0l8mZ1xs6bhJMJkl5JujoNv4aiGipxJo'\r\n\t\t\tredirectUri={process.env.REACT_APP_CLIENT_ADDR}>\r\n\t\t\t<RouterComponent />\r\n\t\t</Auth0Provider>\r\n\t);\r\n}\r\n","/** @format */\r\n\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport OutletComponent from 'Components/OutletComponent';\r\n\r\nimport 'Styles/index.css';\r\n\r\nReactDOM.render(\r\n\t<React.StrictMode>\r\n\t\t<OutletComponent />\r\n\t</React.StrictMode>,\r\n\tdocument.getElementById('root')\r\n);\r\n\r\nreportWebVitals();\r\n"],"sourceRoot":""}